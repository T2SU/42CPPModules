CC = clang++
CFLAGS = -Wall -Wextra -Werror -std=c++98

SRCS = main Converter
INC = -I./

FINAL_SRCS = $(addsuffix .cpp, $(SRCS))
FINAL_OBJS = $(FINAL_SRCS:.cpp=.o)

NAME = convert

all: $(NAME)

%.o: %.cpp
	$(CC) $(CFLAGS) $(INC) -c $< -o $@

$(NAME): $(FINAL_OBJS)
	$(CC) $(CFLAGS) -o $@ $^

clean:
	rm -f $(FINAL_OBJS)

fclean: clean
	rm -f $(NAME)

re: clean all

test_good: all
	@echo "---------------------------------------"
	./$(NAME) 42
	@echo "---------------------------------------"
	./$(NAME) 42.0
	@echo "---------------------------------------"
	./$(NAME) 42.0f
	@echo "---------------------------------------"
	./$(NAME) -42
	@echo "---------------------------------------"
	./$(NAME) -42.0
	@echo "---------------------------------------"
	./$(NAME) -42.0f
	@echo "---------------------------------------"
	./$(NAME) nanf
	@echo "---------------------------------------"
	./$(NAME) nan
	@echo "---------------------------------------"
	./$(NAME) inff
	@echo "---------------------------------------"
	./$(NAME) inf
	@echo "---------------------------------------"
	./$(NAME) -nanf
	@echo "---------------------------------------"
	./$(NAME) -nan
	@echo "---------------------------------------"
	./$(NAME) -inff
	@echo "---------------------------------------"
	./$(NAME) -inf
	@echo "---------------------------------------"
	./$(NAME) -2147483648
	@echo "---------------------------------------"
	./$(NAME) 2147483647
	@echo "---------------------------------------"
	./$(NAME) "'*'"
	@echo "---------------------------------------"
	./$(NAME) "'a'"
	@echo "---------------------------------------"
	./$(NAME) "'b'"
	@echo "---------------------------------------"
	./$(NAME) "'c'"
	@echo "---------------------------------------"
	./$(NAME) "' '"
	@echo "---------------------------------------"
	./$(NAME) 0
	@echo "---------------------------------------"
	./$(NAME) -0
	@echo "---------------------------------------"
	./$(NAME) 1.25
	@echo "---------------------------------------"
	./$(NAME) 25.6543
	@echo "---------------------------------------"
	./$(NAME) 25.654356
	@echo "---------------------------------------"
	./$(NAME) 250000
	@echo "---------------------------------------"
	./$(NAME) 2500000
	@echo "---------------------------------------"
	./$(NAME) 100000000000000000000
	@echo "---------------------------------------"

test_bad: all
	@echo "---------------------------------------"
	./$(NAME) abcd
	@echo "---------------------------------------"
	./$(NAME) "''"
	@echo "---------------------------------------"
	./$(NAME) ''
	@echo "---------------------------------------"
	./$(NAME) 111111111111111111111111111111111111111111111111111111111111111111111111111111111111
	@echo "---------------------------------------"
	./$(NAME) -111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
	@echo "---------------------------------------"

.PHONY: all clean fclean re test
